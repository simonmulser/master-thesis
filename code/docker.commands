docker build -t simcoin/proxy:v1 .

docker network create --subnet=240.0.0.0/4 --driver bridge simcoin-network

recommended starting order:
docker run --detach=true --net=simcoin-network --ip=240.0.0.4 --name=bob1 node bitcoind -dnsseed=0 -listen -logips -onlynet=ipv4 -listenonion=0 -datadir=/data -regtest -logtimemicros -debug
docker run --detach=true --net=simcoin-network --ip=240.0.0.5 --name=bob2 node bitcoind -dnsseed=0 -listen -logips -onlynet=ipv4 -listenonion=0 -datadir=/data -regtest -logtimemicros -debug
docker run --detach=true --net=simcoin-network --ip=240.0.0.2 --name=alice node bitcoind -dnsseed=0 -listen -logips -onlynet=ipv4 -listenonion=0 -datadir=/data -regtest -logtimemicros -debug

docker run -v $PWD/selfish_proxy:/code --net=simcoin-network --ip=240.0.0.10 --rm --name=proxy proxy python main.py -v --ip-private 240.0.0.2 --ips-public 240.0.0.4 240.0.0.5 --start-hash

docker exec bob1 /bin/sh -c 'bitcoin-cli -regtest -datadir=/data generate 1'
docker exec bob1 /bin/sh -c 'bitcoin-cli -regtest -datadir=/data sendtoaddress $(bitcoin-cli -regtest -datadir=/data getnewaddress) 10.0'
for run in {1..101}; do docker exec bob1 /bin/sh -c 'bitcoin-cli -regtest -datadir=/data generate 1'; done
